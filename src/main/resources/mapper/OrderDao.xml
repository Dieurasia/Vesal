<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.thoughtWorks.dao.OrderDao">
    <insert id="addOrder" parameterType="Order">
        insert into v_order(o_ordertime,o_finish,custom_id,model_id,o_model_price,
        o_model_introduce,o_model_version,o_model_code)VALUES
         (#{oOrderTime},#{oFinish},#{customId},#{modelId},#{oModelPrice},
         #{oModelIntroduce},#{oModelVersion},#{oModelCode})
    </insert>
    <select id="queryAddOrder" resultType="int" parameterType="Order">
        select count(*) from v_order where custom_id = #{customId} AND model_id = #{modelId}
    </select>
    <select id="queryUnfinishedOrder" resultType="Map" parameterType="Order">
        SELECT v_order.*,v_model.* from v_order,v_model where v_order.custom_id = #{customId} AND v_order.o_finish =0 AND v_model.m_id = v_order.model_id
    </select>
    <select id="deleteOrderByOid"  parameterType="int">
        DELETE from v_order where o_id = #{o_id}
    </select>

    <insert id="addCart" parameterType="Cart">
        insert into v_cart(custom_id,model_id)VALUES(#{customId},#{modelId})
    </insert>
    <select id="queryAddCart" resultType="int" parameterType="Cart">
        select count(*) from v_cart where custom_id = #{customId} AND model_id = #{modelId}
    </select>
    <select id="queryCartModel" resultType="Map" parameterType="Cart">
        SELECT v_cart.*,v_model.* from v_cart,v_model where v_cart.custom_id = #{customId} and v_cart.model_id = v_model.m_id
    </select>
    <select id="deleteCartByCid"  parameterType="int">
        DELETE from v_cart where c_id = #{cId}
    </select>
</mapper>